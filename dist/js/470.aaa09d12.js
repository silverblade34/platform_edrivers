"use strict";(self["webpackChunktemplate_vue_platform"]=self["webpackChunktemplate_vue_platform"]||[]).push([[470],{3470:function(e,t,a){a.r(t),a.d(t,{default:function(){return q}});var o=a(3396);const l={class:"flex justify-between"},n=(0,o._)("h1",{class:"font-bold lg:text-2xl text-xl text-gray-400"},"Compañias",-1),i={class:"py-5"};function d(e,t,a,d,m,r){const u=(0,o.up)("ModalCreateCompanyVue"),c=(0,o.up)("TableCompaniesVue"),s=(0,o.up)("ModalEditCompanyVue");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",l,[n,(0,o.Wm)(u,{onCreateItem:d.onCreateItem},null,8,["onCreateItem"])]),(0,o._)("div",i,[(0,o.Wm)(c,{desserts:d.dataCompanies,onEditItem:d.onEditItem,onDeleteItem:d.onDeleteItem},null,8,["desserts","onEditItem","onDeleteItem"])]),(0,o.Wm)(s,{itemEdit:d.itemEdit,openModal:d.dialogEdit,onCancelItem:t[0]||(t[0]=e=>d.dialogEdit=!1),onEditItem:d.onUpdateItem},null,8,["itemEdit","openModal","onEditItem"])],64)}var m=a(4870),r=a(3512),u=a(3041);const c="http://204.48.17.106:3020/api/v1";function s(e){return u.Z.get(`${c}/company`,{headers:{Authorization:`Bearer ${e}`}})}function p(e,t){return u.Z.post(`${c}/company`,{headers:{Authorization:`Bearer ${t}`}},e)}var v=a(870),g=a(5039),C=a(1888),w=a(1334),f=a(3601),y=a(8521),k=a(9234),V=a(3289),_=a(165),b=a(1328);const h=(0,o._)("span",{class:"px-4 w-full text-center text-indigo-500 font-bold title_views"},"CREAR COMPAÑIA",-1);function I(e,t,a,l,n,i){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(v.T,{size:"small",class:"text-none",color:"indigo-darken-1",onClick:t[0]||(t[0]=e=>l.dialog=!0)},{default:(0,o.w5)((()=>[(0,o.Wm)(V.t,{icon:"mdi-plus"}),(0,o.Uk)(" Nuevo")])),_:1}),(0,o.Wm)(f.B,{modelValue:l.dialog,"onUpdate:modelValue":t[5]||(t[5]=e=>l.dialog=e),width:"550","onClick:outside":l.closeItem},{default:(0,o.w5)((()=>[(0,o.Wm)(g._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b.i,null,{default:(0,o.w5)((()=>[h])),_:1}),(0,o.Wm)(C.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(y.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(_.h,{variant:"outlined",label:"Nombre",color:"indigo",modelValue:l.name,"onUpdate:modelValue":t[1]||(t[1]=e=>l.name=e),"prepend-inner-icon":"mdi-text"},null,8,["modelValue"]),(0,o.Wm)(_.h,{variant:"outlined",label:"Usuario","prepend-inner-icon":"mdi-account",color:"indigo",modelValue:l.username,"onUpdate:modelValue":t[2]||(t[2]=e=>l.username=e)},null,8,["modelValue"]),(0,o.Wm)(_.h,{variant:"outlined",label:"Contraseña","prepend-inner-icon":"mdi-lock",color:"indigo",modelValue:l.password,"onUpdate:modelValue":t[3]||(t[3]=e=>l.password=e)},null,8,["modelValue"]),(0,o.Wm)(_.h,{variant:"outlined",label:"Codigo de compañia","prepend-inner-icon":"mdi-barcode",color:"indigo",modelValue:l.codecompany,"onUpdate:modelValue":t[4]||(t[4]=e=>l.codecompany=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(w.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(k.C),(0,o.Wm)(v.T,{color:"blue-grey-lighten-2",variant:"tonal",onClick:l.closeItem},{default:(0,o.w5)((()=>[(0,o.Uk)(" Cancelar ")])),_:1},8,["onClick"]),(0,o.Wm)(v.T,{color:"blue-lighten-1",variant:"tonal",onClick:l.createItem},{default:(0,o.w5)((()=>[(0,o.Uk)(" Aceptar ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onClick:outside"])],64)}var W={emits:["create-item"],setup(e,{emit:t}){const a=(0,m.iH)(!1),o=(0,m.iH)(""),l=(0,m.iH)(""),n=(0,m.iH)(""),i=(0,m.iH)(""),d=()=>{t("create-item",{name:o.value,username:l.value,password:n.value,codecompany:i.value}),r()},r=()=>{a.value=!1,o.value=l.value=n.value=i.value=""};return{dialog:a,name:o,username:l,password:n,codecompany:i,createItem:d,closeItem:r}}},E=a(89);const U=(0,E.Z)(W,[["render",I]]);var x=U,H=a(678);const A={class:"flex gap-1 justify-center"},D=["onClick"],T=["onClick"];function M(e,t,a,l,n,i){const d=(0,o.up)("v-data-table");return(0,o.wg)(),(0,o.j4)(d,{headers:n.headers,items:a.desserts,class:"elevation-1 text-sm"},{["item.actions"]:(0,o.w5)((({item:e})=>[(0,o._)("div",A,[(0,o._)("span",{onClick:t=>l.editItem(e)},[(0,o.Wm)(v.T,{icon:"mdi-pencil",size:"small",variant:"text",color:"green"}),(0,o.Wm)(H.N,{activator:"parent",location:"top"},{default:(0,o.w5)((()=>[(0,o.Uk)("Editar")])),_:1})],8,D),(0,o._)("span",{onClick:t=>l.deleteItem(e)},[(0,o.Wm)(v.T,{icon:"mdi-delete-empty",size:"small",variant:"text",color:"red"}),(0,o.Wm)(H.N,{activator:"parent",location:"top"},{default:(0,o.w5)((()=>[(0,o.Uk)("Eliminar")])),_:1})],8,T)])])),_:2},1032,["headers","items"])}var Z=a(5557),j={props:{desserts:Array},components:{VDataTable:Z.y_},emits:["delete-item","edit-item"],data(){return{headers:[{title:"Nombre",align:"start",key:"name"},{title:"Usuario",align:"start",key:"username"},{title:"Codigo de compañia",key:"codecompany"},{title:"Codigo de recurso",align:"start",key:"recourseId"},{title:"Acciones",align:"center",key:"actions"}]}},setup(e,{emit:t}){const a=e=>{t("edit-item",{item:e})},o=e=>{t("delete-item",{item:e})},l=e=>{const t={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},a=new Date(e).toLocaleDateString("es-PE",t);return a};return{formatCreatedAt:l,editItem:a,deleteItem:o}}};const N=(0,E.Z)(j,[["render",M]]);var z=N;const B=(0,o._)("span",{class:"px-4 w-full text-center text-blue-500 font-bold title_views"},"EDITAR COMPAÑIA",-1);function P(e,t,a,l,n,i){return(0,o.wg)(),(0,o.j4)(f.B,{modelValue:l.dialog,"onUpdate:modelValue":t[4]||(t[4]=e=>l.dialog=e),width:"550","onClick:outside":l.closeItem},{default:(0,o.w5)((()=>[(0,o.Wm)(g._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b.i,null,{default:(0,o.w5)((()=>[B])),_:1}),(0,o.Wm)(C.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(y.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(_.h,{variant:"outlined",label:"Nombre",color:"blue",modelValue:l.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.name=e),"prepend-inner-icon":"mdi-text"},null,8,["modelValue"]),(0,o.Wm)(_.h,{variant:"outlined",label:"Usuario","prepend-inner-icon":"mdi-account",color:"blue",modelValue:l.username,"onUpdate:modelValue":t[1]||(t[1]=e=>l.username=e)},null,8,["modelValue"]),(0,o.Wm)(_.h,{variant:"outlined",label:"Contraseña","prepend-inner-icon":"mdi-lock",color:"blue",modelValue:l.password,"onUpdate:modelValue":t[2]||(t[2]=e=>l.password=e)},null,8,["modelValue"]),(0,o.Wm)(_.h,{variant:"outlined",label:"Codigo de compañia","prepend-inner-icon":"mdi-barcode",color:"blue",modelValue:l.codecompany,"onUpdate:modelValue":t[3]||(t[3]=e=>l.codecompany=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(w.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(k.C),(0,o.Wm)(v.T,{color:"blue-grey-lighten-2",variant:"tonal",onClick:l.closeItem},{default:(0,o.w5)((()=>[(0,o.Uk)(" Cancelar ")])),_:1},8,["onClick"]),(0,o.Wm)(v.T,{color:"blue-lighten-1",variant:"tonal",onClick:l.editItem},{default:(0,o.w5)((()=>[(0,o.Uk)(" Aceptar ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onClick:outside"])}var O={props:{itemEdit:Object,openModal:Boolean},emits:["edit-item","cancel-item"],setup(e,{emit:t}){const a=(0,m.iH)(!1),l=(0,m.iH)(""),n=(0,m.iH)(""),i=(0,m.iH)(""),d=(0,m.iH)("");(0,o.YP)((()=>e.openModal),(async e=>{a.value=e})),(0,o.YP)((()=>e.itemEdit),(e=>{console.log(e),0!==Object.keys(e).length&&(l.value=e.item.name,n.value=e.item.username,i.value=e.item.password,d.value=e.item.codecompany)}));const r=()=>{t("edit-item",{name:l.value,username:n.value,password:i.value,codecompany:d.value}),u()},u=()=>{t("cancel-item")};return{dialog:a,name:l,username:n,password:i,codecompany:d,editItem:r,closeItem:u}}};const Y=(0,E.Z)(O,[["render",P]]);var $=Y,L=a(4239),R={components:{ModalCreateCompanyVue:x,ModalEditCompanyVue:$,TableCompaniesVue:z},setup(){const e=(0,m.iH)([]),t=(0,m.iH)({}),a=(0,m.iH)(!1);(0,o.bv)((()=>{n()}));const l=async e=>{""!=e.name&&""!=e.username&&""!=e.password&&""!=e.codecompany?await p(e,L.Z.state.token).then((()=>{(0,r.y)((()=>{n()}),"success","Logrado","Se ha creado correctamente")})).catch((e=>{(0,r.y)((()=>{}),"error","Error",e.message)})):(0,r.y)((()=>{}),"warning","Error","Los campos no deben estar vacios")},n=async()=>{const t=await s(L.Z.state.token);e.value=t.data.data},i=e=>{a.value=!0,t.value=e},d=()=>{},u=()=>{};return{dialogEdit:a,dataCompanies:e,itemEdit:t,onUpdateItem:u,onDeleteItem:d,onCreateItem:l,onEditItem:i}}};const S=(0,E.Z)(R,[["render",d]]);var q=S}}]);
//# sourceMappingURL=470.aaa09d12.js.map